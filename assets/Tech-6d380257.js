import{B as X,V as j,M as F,b as z,u as Z,c as W,T as L,r as c,d as v,E as _,e as G,O as q,_ as J,g as K,h as Q,j as R,C as Y,a as g,i as V,k as tt,P as et,S as ot,l as rt}from"./index-e44c23cf.js";import{m as st}from"./react-merge-refs.esm-239dbb3c.js";class nt extends X{constructor(h,d,m,b){super();const y=[],M=[],T=[],l=new j,O=new F;O.makeRotationFromEuler(m),O.setPosition(d);const B=new F;B.copy(O).invert(),k(),this.setAttribute("position",new z(y,3)),this.setAttribute("normal",new z(M,3)),this.setAttribute("uv",new z(T,2));function k(){let t,e=[];const r=new j,n=new j;if(h.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const s=h.geometry,A=s.attributes.position,x=s.attributes.normal;if(s.index!==null){const u=s.index;for(t=0;t<u.count;t++)r.fromBufferAttribute(A,u.getX(t)),n.fromBufferAttribute(x,u.getX(t)),E(e,r,n)}else for(t=0;t<A.count;t++)r.fromBufferAttribute(A,t),n.fromBufferAttribute(x,t),E(e,r,n);for(e=f(e,l.set(1,0,0)),e=f(e,l.set(-1,0,0)),e=f(e,l.set(0,1,0)),e=f(e,l.set(0,-1,0)),e=f(e,l.set(0,0,1)),e=f(e,l.set(0,0,-1)),t=0;t<e.length;t++){const u=e[t];T.push(.5+u.position.x/b.x,.5+u.position.y/b.y),u.position.applyMatrix4(O),y.push(u.position.x,u.position.y,u.position.z),M.push(u.normal.x,u.normal.y,u.normal.z)}}function E(t,e,r){e.applyMatrix4(h.matrixWorld),e.applyMatrix4(B),r.transformDirection(h.matrixWorld),t.push(new H(e.clone(),r.clone()))}function f(t,e){const r=[],n=.5*Math.abs(b.dot(e));for(let s=0;s<t.length;s+=3){let A,x,u,C=0,i,p,w,D;const N=t[s+0].position.dot(e)-n,U=t[s+1].position.dot(e)-n,$=t[s+2].position.dot(e)-n;switch(A=N>0,x=U>0,u=$>0,C=(A?1:0)+(x?1:0)+(u?1:0),C){case 0:{r.push(t[s]),r.push(t[s+1]),r.push(t[s+2]);break}case 1:{if(A&&(i=t[s+1],p=t[s+2],w=a(t[s],i,e,n),D=a(t[s],p,e,n)),x){i=t[s],p=t[s+2],w=a(t[s+1],i,e,n),D=a(t[s+1],p,e,n),r.push(w),r.push(p.clone()),r.push(i.clone()),r.push(p.clone()),r.push(w.clone()),r.push(D);break}u&&(i=t[s],p=t[s+1],w=a(t[s+2],i,e,n),D=a(t[s+2],p,e,n)),r.push(i.clone()),r.push(p.clone()),r.push(w),r.push(D),r.push(w.clone()),r.push(p.clone());break}case 2:{A||(i=t[s].clone(),p=a(i,t[s+1],e,n),w=a(i,t[s+2],e,n),r.push(i),r.push(p),r.push(w)),x||(i=t[s+1].clone(),p=a(i,t[s+2],e,n),w=a(i,t[s],e,n),r.push(i),r.push(p),r.push(w)),u||(i=t[s+2].clone(),p=a(i,t[s],e,n),w=a(i,t[s+1],e,n),r.push(i),r.push(p),r.push(w));break}}}return r}function a(t,e,r,n){const s=t.position.dot(r)-n,A=e.position.dot(r)-n,x=s/(s-A);return new H(new j(t.position.x+x*(e.position.x-t.position.x),t.position.y+x*(e.position.y-t.position.y),t.position.z+x*(e.position.z-t.position.z)),new j(t.normal.x+x*(e.normal.x-t.normal.x),t.normal.y+x*(e.normal.y-t.normal.y),t.normal.z+x*(e.normal.z-t.normal.z)))}}}class H{constructor(h,d){this.position=h,this.normal=d}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}const I=o=>o===Object(o)&&!Array.isArray(o)&&typeof o!="function";function P(o,h){const d=Z(b=>b.gl),m=W(L,I(o)?Object.values(o):o);if(c.useLayoutEffect(()=>{h==null||h(m)},[h]),c.useEffect(()=>{(Array.isArray(m)?m:[m]).forEach(d.initTexture)},[d,m]),I(o)){const b=Object.keys(o),y={};return b.forEach(M=>Object.assign(y,{[M]:m[b.indexOf(M)]})),y}else return m}P.preload=o=>W.preload(L,o);P.clear=o=>W.clear(L,o);function at(o){return Array.isArray(o)}function S(o=[0,0,0]){return at(o)?o:o instanceof j||o instanceof _?[o.x,o.y,o.z]:[o,o,o]}const lt=c.forwardRef(function({debug:h,depthTest:d=!1,polygonOffsetFactor:m=-10,map:b,mesh:y,children:M,position:T,rotation:l,scale:O,...B},k){const E=c.useRef(null);c.useImperativeHandle(k,()=>E.current);const f=c.useRef(null);return c.useLayoutEffect(()=>{const a=(y==null?void 0:y.current)||E.current.parent,t=E.current;if(!(a instanceof v))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const e={position:new j,rotation:new _,scale:new j(1,1,1)};if(a){G(e,{position:T,scale:O});const r=a.matrixWorld.clone();if(a.matrixWorld.identity(),!l||typeof l=="number"){const n=new q;n.position.copy(e.position),n.lookAt(a.position),typeof l=="number"&&n.rotateZ(l),G(e,{rotation:n.rotation})}else G(e,{rotation:l});return t.geometry=new nt(a,e.position,e.rotation,e.scale),f.current&&(G(f.current,e),f.current.traverse(n=>n.raycast=()=>null)),a.matrixWorld=r,()=>{t.geometry.dispose()}}},[y,...S(T),...S(O),...S(l)]),c.createElement("mesh",J({ref:E,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":m,"material-depthTest":d,"material-map":b},B),M,h&&c.createElement("mesh",{ref:f},c.createElement("boxGeometry",null),c.createElement("meshNormalMaterial",{wireframe:!0}),c.createElement("axesHelper",null)))}),it=c.forwardRef(({children:o,enabled:h=!0,speed:d=1,rotationIntensity:m=1,floatIntensity:b=1,floatingRange:y=[-.1,.1],...M},T)=>{const l=c.useRef(null),O=c.useRef(Math.random()*1e4);return K(B=>{var k,E;if(!h||d===0)return;const f=O.current+B.clock.getElapsedTime();l.current.rotation.x=Math.cos(f/4*d)/8*m,l.current.rotation.y=Math.sin(f/4*d)/8*m,l.current.rotation.z=Math.sin(f/4*d)/20*m;let a=Math.sin(f/4*d)/10;a=Q.mapLinear(a,-.1,.1,(k=y==null?void 0:y[0])!==null&&k!==void 0?k:-.1,(E=y==null?void 0:y[1])!==null&&E!==void 0?E:.1),l.current.position.y=a*b,l.current.updateMatrix()}),c.createElement("group",M,c.createElement("group",{ref:st([l,T]),matrixAutoUpdate:!1},o))}),ut=({imgUrl:o})=>R(it,{speed:1.75,rotationIntensity:1,floatIntensity:2,children:[g("ambientLight",{intensity:.25}),g("directionalLight",{position:[0,0,.05]}),R("mesh",{castShadow:!0,receiveShadow:!0,scale:2.75,children:[g("icosahedronGeometry",{args:[1,1]}),g("meshStandardMaterial",{color:"#fff8eb",flatShading:!0}),o&&g(lt,{position:[0,0,1],rotation:[2*Math.PI,0,6.25],scale:1,url:o,flatShading:!0})]})]}),ct=({icon:o})=>(P([o]),R(Y,{frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},children:[R(c.Suspense,{fallback:g(V,{}),children:[g(tt,{enableZoom:!1}),g(ut,{imgUrl:o})]}),g(et,{all:!0})]})),ft=()=>g("div",{className:"flex flex-row flex-wrap justify-center gap-10",children:rt.map(o=>g("div",{className:"w-28 h-28",title:o.name,children:g(ct,{icon:o.icon})},o.name))}),ht=ot(ft,"");export{ht as default};
